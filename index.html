<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Codecontrole</title>

<style>
body{
  margin:0;
  background:#050505;
  color:#f5f5f5;
  font-family:'Trebuchet MS',sans-serif;
  text-align:center;
  padding:2rem;
}

h1{margin-bottom:1.5rem;}

#code-inputs{
  display:flex;
  justify-content:center;
  gap:12px;
}

input{
  width:60px;
  height:70px;
  font-size:2.2rem;
  text-align:center;
  background:#111;
  color:#fff;
  border:1px solid #444;
  border-radius:8px;
}

/* pijltjes weg */
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button{
  -webkit-appearance:none;
  margin:0;
}
input[type=number]{appearance:textfield;}

button{
  margin-top:25px;
  padding:10px 22px;
  font-size:1.1rem;
  border:none;
  border-radius:8px;
  background:#660000;
  color:white;
  cursor:pointer;
}
button:hover{background:#880000;}

#result{
  margin-top:2rem;
  font-size:1.3rem;
}

#lines{
  margin-top:2rem;
  max-width:900px;
  margin-left:auto;
  margin-right:auto;
  text-align:left;
  font-family:monospace;
  line-height:1.6;
}

#tipBtn{display:none;}
#tipText{margin-top:1rem;font-style:italic;color:#ffcccc;}

/* Overlay */
#overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.9);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  opacity:0;
  pointer-events:none;
  transition:opacity 0.6s ease;
  z-index:9999;
}

#overlay.active{
  opacity:1;
  pointer-events:all;
}

/* Rood oog (langzaam knipperen) */
#red-eye{
  width:70px;
  height:70px;
  border-radius:50%;
  background:radial-gradient(circle, red 0%, #600 40%, transparent 70%);
  box-shadow:0 0 30px 12px rgba(255,0,0,0.35);
  animation:eyePulse 4s ease-in-out infinite;
}

@keyframes eyePulse{
  0%,100%{transform:scale(1);opacity:0.7;}
  50%{transform:scale(1.15);opacity:1;}
}

/* Progress bar */
#progressBox{
  width:260px;
  height:14px;
  background:#222;
  border-radius:10px;
  overflow:hidden;
  margin-top:30px;
}

#progress{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#aa0000,#ff4444);
  transition:width 5s linear;
}

#checkingText{
  margin-top:25px;
  letter-spacing:2px;
  opacity:0.8;
}
</style>
</head>

<body>

<h1>Voer de 4-cijferige code in</h1>

<div id="code-inputs">
  <input type="number" id="c1" min="0" max="9">
  <input type="number" id="c2" min="0" max="9">
  <input type="number" id="c3" min="0" max="9">
  <input type="number" id="c4" min="0" max="9">
</div>

<button onclick="checkCode()">Controleer code</button>

<div id="result"></div>
<div id="lines"></div>

<button id="tipBtn" onclick="showTip()">Tip!</button>
<div id="tipText"></div>

<!-- Overlay -->
<div id="overlay">
  <div id="red-eye"></div>
  <div id="progressBox"><div id="progress"></div></div>
  <div id="checkingText">Code wordt gecontroleerdâ€¦</div>
</div>

<script>
const correctCode=[3,7,3,7];
let audioCtx, modemOsc, modemGain;

function startModem(){
  audioCtx=new(window.AudioContext||window.webkitAudioContext)();
  modemOsc=audioCtx.createOscillator();
  modemGain=audioCtx.createGain();
  modemOsc.type="square";
  modemOsc.frequency.setValueAtTime(900,audioCtx.currentTime);
  modemGain.gain.setValueAtTime(0.04,audioCtx.currentTime);
  modemOsc.connect(modemGain).connect(audioCtx.destination);
  modemOsc.start();

  // onrustig moduleren
  const lfo=audioCtx.createOscillator();
  const lfoGain=audioCtx.createGain();
  lfo.frequency.value=6;
  lfoGain.gain.value=300;
  lfo.connect(lfoGain).connect(modemOsc.frequency);
  lfo.start();
}

function stopModem(){
  if(!modemGain)return;
  modemGain.gain.exponentialRampToValueAtTime(0.0001,audioCtx.currentTime+0.2);
  modemOsc.stop(audioCtx.currentTime+0.3);
}

function errorBeep(){
  const osc=audioCtx.createOscillator();
  const gain=audioCtx.createGain();
  osc.type="square";
  osc.frequency.value=120;
  gain.gain.setValueAtTime(0.15,audioCtx.currentTime);
  osc.connect(gain).connect(audioCtx.destination);
  osc.start();
  osc.stop(audioCtx.currentTime+0.5);
}

function successTone(){
  [523,659,784].forEach((f,i)=>{
    const osc=audioCtx.createOscillator();
    const gain=audioCtx.createGain();
    osc.type="sine";
    osc.frequency.value=f;
    gain.gain.setValueAtTime(0.09,audioCtx.currentTime);
    osc.connect(gain).connect(audioCtx.destination);
    osc.start(audioCtx.currentTime+i*0.05);
    osc.stop(audioCtx.currentTime+1);
  });
}

function checkCode(){
  const c=[+c1.value,+c2.value,+c3.value,+c4.value];

  result.innerHTML='';
  lines.innerHTML='';
  tipBtn.style.display='none';
  tipText.innerHTML='';
  progress.style.width='0%';

  overlay.classList.add('active');
  startModem();

  setTimeout(()=>progress.style.width='100%',50);

  setTimeout(()=>{
    overlay.classList.remove('active');
    stopModem();
    finalizeCheck(c);
  },5000);
}

function finalizeCheck(c){
  let errors=0;
  for(let i=0;i<4;i++) if(c[i]!==correctCode[i]) errors++;

  if(errors>0){
    errorBeep();
    result.innerHTML=`<span style="color:red;">Code incorrect</span><br>${errors} cijfer(s) fout.`;
  }else{
    successTone();
    result.innerHTML=`<span style="color:lime;">Code correct</span>`;

    const tekst=[
"1) 6 niks, 4 blauw, 6 niks",
"2) 5 niks, 1 blauw, 3 roze, 1 blauw, 6 niks",
"3) 4 niks, 1 blauw, 2 roze, 2 blauw, 7 niks",
"4) 3 niks, 1 blauw, 1 groen, 1 geel, 2 groen, 1 blauw, 7 niks",
"5) 2 niks, 1 blauw, 1 groen, 1 blauw, 1 geel, 1 blauw, 1 geel, 1 groen, 1 blauw, 1 niks, 4 blauw, 1 niks",
"6) 2 niks, 1 blauw, 1 groen, 1 blauw, 1 geel, 1 blauw, 1 geel, 1 groen, 2 blauw, 1 groen, 2 geel, 1 groen, 1 blauw",
"7) 1 niks, 1 blauw, 2 oranje, 1 groen, 4 geel, 1 blauw, 1 groen, 1 geel, 1 groen, 1 geel, 1 groen, 1 blauw",
"8) 2 niks, 2 blauw, 5 geel, 1 groen, 4 geel, 1 blauw, 1 niks",
"9) 1 niks, 1 blauw, 2 groen, 3 gecl, 2 groen, 3 geel, 1 groen, 2 geol, 1 blauw",
"10) 1 blauw, 2 groen, 5 geel, 1 groen, 1 blauw, 1 geel, 1 groen, 1 blauw, 2 geel, 1 blauw",
"11) 1 blauw, 3 groen, 1 geel, 1 groen, 3 geel, 1 groen, 2 blauw, 1 groen, 1 geel, 1 blauw, 1 niks",
"12) 1 blauw, 2 groen, 1 geel, 1 groen, 1 geel, 1 groen, 7 geel, 1 blauw, 1 niks",
"13) 1 niks, 2 blauw, 1 groen, 8 geel, 1 groen, 1 blauw, 2 niks",
"14) 2 niks, 2 blauw, 1 groen, 5 geel, 2 groen, 2 blauw, 2 niks",
"15) 3 niks, 10 blauw, 3 niks",
"16) 2 niks, 1 blauw, 3 oranje, 1 blauw, 3 oranje, 1 blauw, 5 niks"
    ];

    tekst.forEach(t=>{
      const p=document.createElement("p");
      p.textContent=t;
      lines.appendChild(p);
    });

    tipBtn.style.display='inline-block';
  }
}

function showTip(){
  tipText.textContent="Artikelnummer 14122210 Hema";
}
</script>

</body>
</html>
