<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Codecontrole</title>

<style>
body{
  margin:0;
  background:#050505;
  color:#f5f5f5;
  font-family:'Trebuchet MS',sans-serif;
  text-align:center;
  padding:2rem;
}

h1{margin-bottom:1.5rem;}

input{
  width:60px;
  font-size:2rem;
  text-align:center;
  margin:0 6px;
  background:#111;
  color:#fff;
  border:1px solid #444;
  border-radius:6px;
}

/* verwijder pijltjes */
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button{
  -webkit-appearance:none;
  margin:0;
}
input[type=number]{appearance:textfield;}

button{
  margin-top:25px;
  padding:10px 22px;
  font-size:1.1rem;
  border:none;
  border-radius:8px;
  background:#660000;
  color:white;
  cursor:pointer;
}
button:hover{background:#880000;}

#result{
  margin-top:2rem;
  font-size:1.3rem;
}

#lines{
  margin-top:2rem;
  max-width:900px;
  margin-left:auto;
  margin-right:auto;
  text-align:left;
  font-family:monospace;
  line-height:1.6;
}

#tipBtn{display:none;}
#tipText{margin-top:1rem;font-style:italic;color:#ffcccc;}

/* Overlay + oog */
#overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  opacity:0;
  pointer-events:none;
  transition:opacity 1s ease;
  z-index:9999;
}

#overlay.active{
  opacity:1;
  pointer-events:all;
}

#red-eye{
  width:90px;
  height:90px;
  border-radius:50%;
  background:radial-gradient(circle, red 0%, #600 40%, transparent 70%);
  box-shadow:0 0 50px 20px rgba(255,0,0,0.4);
  animation:slowZoom 5s linear forwards;
}

@keyframes slowZoom{
  from{transform:scale(1);}
  to{transform:scale(2.5);}
}

#checkingText{
  margin-top:30px;
  font-size:1.4rem;
  letter-spacing:2px;
  opacity:0.85;
}
</style>
</head>

<body>

<h1>Voer de 4-cijferige code in</h1>

<div>
  <input type="number" id="c1" min="0" max="9">
  <input type="number" id="c2" min="0" max="9">
  <input type="number" id="c3" min="0" max="9">
  <input type="number" id="c4" min="0" max="9">
</div>

<button onclick="checkCode()">Controleer code</button>

<div id="result"></div>
<div id="lines"></div>

<button id="tipBtn" onclick="showTip()">Tip!</button>
<div id="tipText"></div>

<!-- Overlay -->
<div id="overlay">
  <div id="red-eye"></div>
  <div id="checkingText"></div>
</div>

<script>
const correctCode=[3,7,3,7];
let audioCtx, droneOsc, droneGain;

/* audio */
function startDrone(){
  audioCtx=new(window.AudioContext||window.webkitAudioContext)();
  droneOsc=audioCtx.createOscillator();
  droneGain=audioCtx.createGain();
  droneOsc.type="sawtooth";
  droneOsc.frequency.value=55;
  droneGain.gain.setValueAtTime(0.0001,audioCtx.currentTime);
  droneGain.gain.exponentialRampToValueAtTime(0.05,audioCtx.currentTime+3);
  droneOsc.connect(droneGain).connect(audioCtx.destination);
  droneOsc.start();
}

function stopDrone(){
  if(!droneGain)return;
  droneGain.gain.exponentialRampToValueAtTime(0.0001,audioCtx.currentTime+0.5);
  droneOsc.stop(audioCtx.currentTime+0.6);
}

function errorBuzz(){
  const osc=audioCtx.createOscillator();
  const gain=audioCtx.createGain();
  osc.type="square";
  osc.frequency.value=90;
  gain.gain.setValueAtTime(0.12,audioCtx.currentTime);
  osc.connect(gain).connect(audioCtx.destination);
  osc.start();
  osc.stop(audioCtx.currentTime+0.6);
}

function successTone(){
  [440,660,880].forEach((f,i)=>{
    const osc=audioCtx.createOscillator();
    const gain=audioCtx.createGain();
    osc.type="sine";
    osc.frequency.value=f;
    gain.gain.setValueAtTime(0.08,audioCtx.currentTime);
    osc.connect(gain).connect(audioCtx.destination);
    osc.start(audioCtx.currentTime+i*0.05);
    osc.stop(audioCtx.currentTime+1.2);
  });
}

/* check */
function checkCode(){
  const c=[
    +c1.value,+c2.value,+c3.value,+c4.value
  ];

  result.innerHTML='';
  lines.innerHTML='';
  tipBtn.style.display='none';
  tipText.innerHTML='';

  overlay.classList.add('active');
  checkingText.textContent='';
  startDrone();

  const msg="Code wordt gecontroleerdâ€¦";
  let i=0;
  const typer=setInterval(()=>{
    checkingText.textContent+=msg[i++];
    if(i>=msg.length)clearInterval(typer);
  },120);

  setTimeout(()=>{
    overlay.classList.remove('active');
    stopDrone();
    finalizeCheck(c);
  },5000);
}

function finalizeCheck(c){
  let errors=0;
  for(let i=0;i<4;i++) if(c[i]!==correctCode[i]) errors++;

  if(errors>0){
    errorBuzz();
    result.innerHTML=`<span style="color:red;">Code incorrect</span><br>${errors} cijfer(s) fout.`;
  }else{
    successTone();
    result.innerHTML=`<span style="color:lime;">Code correct</span>`;

    const tekst=[
"1) 6 niks, 4 blauw, 6 niks",
"2) 5 niks, 1 blauw, 3 roze, 1 blauw, 6 niks",
"3) 4 niks, 1 blauw, 2 roze, 2 blauw, 7 niks",
"4) 3 niks, 1 blauw, 1 groen, 1 geel, 2 groen, 1 blauw, 7 niks",
"5) 2 niks, 1 blauw, 1 groen, 1 blauw, 1 geel, 1 blauw, 1 geel, 1 groen, 1 blauw, 1 niks, 4 blauw, 1 niks",
"6) 2 niks, 1 blauw, 1 groen, 1 blauw, 1 geel, 1 blauw, 1 geel, 1 groen, 2 blauw, 1 groen, 2 geel, 1 groen, 1 blauw",
"7) 1 niks, 1 blauw, 2 oranje, 1 groen, 4 geel, 1 blauw, 1 groen, 1 geel, 1 groen, 1 geel, 1 groen, 1 blauw",
"8) 2 niks, 2 blauw, 5 geel, 1 groen, 4 geel, 1 blauw, 1 niks",
"9) 1 niks, 1 blauw, 2 groen, 3 gecl, 2 groen, 3 geel, 1 groen, 2 geol, 1 blauw",
"10) 1 blauw, 2 groen, 5 geel, 1 groen, 1 blauw, 1 geel, 1 groen, 1 blauw, 2 geel, 1 blauw",
"11) 1 blauw, 3 groen, 1 geel, 1 groen, 3 geel, 1 groen, 2 blauw, 1 groen, 1 geel, 1 blauw, 1 niks",
"12) 1 blauw, 2 groen, 1 geel, 1 groen, 1 geel, 1 groen, 7 geel, 1 blauw, 1 niks",
"13) 1 niks, 2 blauw, 1 groen, 8 geel, 1 groen, 1 blauw, 2 niks",
"14) 2 niks, 2 blauw, 1 groen, 5 geel, 2 groen, 2 blauw, 2 niks",
"15) 3 niks, 10 blauw, 3 niks",
"16) 2 niks, 1 blauw, 3 oranje, 1 blauw, 3 oranje, 1 blauw, 5 niks"
    ];

    tekst.forEach(t=>{
      const p=document.createElement("p");
      p.textContent=t;
      lines.appendChild(p);
    });

    tipBtn.style.display='inline-block';
  }
}

function showTip(){
  tipText.textContent="Artikelnummer 14122210 Hema";
}
</script>

</body>
</html>
